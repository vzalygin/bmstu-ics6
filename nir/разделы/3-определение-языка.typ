#import "../version.typ": *

= Определение модели исполнения

Модель исполнения стекового языка – это виртуальная стековая машина, имеющая хотя бы один стек данных и набор инструкций для работы со стеком. Например, реализация Forth оперирует двумя стеками: стеком данных для хранения аргументов и результатов и стеком возвратов для адресов возврата при вызове подпрограмм. Исходный код напрямую отражает работу этой виртуальной машины и записывается в форме обратной польской нотации (Reverse Polish Notation, RPN) – сначала указываются операнды, затем операции над ними. Каждая элементарная операция или функция в стековом языке называется словом. Программа представляет собой последовательность слов, которые могут быть либо встроенными примитивами (например, арифметические операции, операции над стеком), либо определенными пользователем субпрограммами. В процессе выполнения поддерживается указатель инструкций (program counter), указывающий на текущую исполняемую команду, который последовательно продвигается по программе, если не изменён особыми словами управления потоком. Большинство инструкций в такой машине берёт необходимые операнды с вершины стека, выполняет вычисление и кладёт полученный результат обратно на стек. Например, исполнение последовательности из трёх инструкций – «push 3», «push 4», «add» – приведёт к тому, что в конце на вершине стека останется число 7. Когда выполнение программы завершено, результат обычно считается находящимся на вершине стека, откуда его можно извлечь для дальнейшего использования.

Стековый язык можно рассматривать как язык для абстрактной машины со стеком. Основные компоненты модели исполнения – это стек как структура данных и набор команд, которые либо модифицируют содержимое стека (например, арифметические операции, берущие операнды из стека), либо управляют порядком исполнения (ветвления, вызовы и возвраты). Каждое слово программы транслируется в одну или несколько команд стековой машины. Такая абстракция лежит в основе многих систем: от высокоуровневых языков (Forth, Factor и др.) до байткод-машин (тот же WebAssembly или Java Virtual Machine, JVM). В случае WebAssembly, например, стандарт прямо указывает, что Wasm представляет собой компактный двоичный формат инструкций для стековой виртуальной машины. Это подчёркивает универсальность стековой модели исполнения в современном программном обеспечении.
